package com.example.demo;

import java.util.ArrayList;

import org.springframework.boot.CommandLineRunner;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.annotation.Bean;

import com.vividsolutions.jts.geom.Geometry;
import com.vividsolutions.jts.geom.GeometryFactory;
import com.vividsolutions.jts.io.WKTReader;

@SpringBootApplication
public class MapHeatMapApplication {

	public static void main(String[] args) {
		SpringApplication.run(MapHeatMapApplication.class, args);
	}
	@Bean
    public CommandLineRunner commandLineRunner(AreaRepository repository,AreaHeatMapRepository re) {
        return (args) -> {
           // repository.save()
           for(Area area: repository.findAll()) {
               area.toString();
           } 
           WKTReader reader = new WKTReader();
           
           //GeometryFactory geometryFactory = GeometryFactory.createPointFromInternalCoord(coord, exemplar)
           Geometry geom =reader.read("0103000020110F00000900000058000000F884990FFEDA1E4161A853AE26735941125053E725DC1E4182A9F27F377359412F5ADB803DDC1E4191EFCDD63873594161D1979770DF1E419524E96467735941C9621274F5E01E4185317ADC7E73594147972DEAEBE11E419925FC5F907359410C94BEFCACE21E41A903DA779F7359411C00EB1CFEE71E41F6F438EF5D735941917C0DDACAE81E41BB5140B36A73594157176B9A78E41E41EC5CD0C6C27359417FBCC561D1E51E41A7A2AC19DC7359417347C80EFFE61E4181636992F2735941E104087A02E81E414E136E800574594170608FF30BE91E415BB7246B117459417201AA0849EA1E415A12DC861D7459415E3E3FF0F0EB1E412CD560952E745941D0DA78D690EC1E41762F7E0B3574594153260C454DEE1E4197FE759D0E7459411369EF0677EF1E415FDD5BDFF4735941D646E28155EE1E41AAFCBBCCD973594104396E08B7ED1E419E5062FBCA7359417CAEF3D6D0EF1E4131199367AD735941B5596772ECEF1E41A4D4F7A8A77359416837FFCAA3F21E4198357875B97359414764ED51EBF51E419F038DB6B273594194DB2DABF8F61E41D209CD049F73594164BA38A21AF81E41937BF1D0897359416F34054BF8F81E41743D54D992735941A8C9A29FF1F71E4129C68213AA73594116E32302BAF71E418CEC3DFEAE73594112EA5A4546F81E4104210BDEAD7359415F23BC38F4FA1E418A5CD3DFCD7359411D224F8D0FFC1E41BD9294699D7359414F44CD4657FD1E416CA2E45491735941EC5D71D64CFF1E41590E9E22BA7359415A849A8350011F418CC312C044735941011BC8B05B011F413A76CE3642735941374674668A011F41089598183C735941E4898E98B7011F41E4FF3BFF36735941E68EC399E9011F41ECEA5433327359419B9B2A2044021F41DC3E030E2B735941FCCDE39B3F041F418F2B750D09735941054F4D33D0031F41026F7B0D01735941E391CD380E001F415A1A4138CE725941874254DD50FD1E41AC2D7734A7725941212B7D89F6FA1E4150D00F19897259414BC3E25B27F91E41FFDEA7056F72594192BD7E6FA6F51E415C9BFB4342725941B2B1966DC2F21E41D7297C7219725941092CBDDBBAF21E41123E71FE267259416677F091D6F51E417B9FD0A24C7259412893C27214F31E4137A99E56967259416A28D691ADF41E418F86A256A77259413D7AE72247F61E41E6F1EC0FC4725941B025A70B43FA1E4173AB9F2BA87259411BF097A342F61E41A192E2844C735941B88AE2553CF41E4118EF2ABC527359410B8072883CF21E41914200BC2A7359419167B76151F11E41F583ED7B1173594110EA167D1AF01E41000CF956FB72594127D6238492F21E417BDDF8ADC3725941A994FA173AF11E41FBDCB0BFA87259415B15E1C9FCEF1E413C5F3F8F88725941A17B57BD66EE1E41E06993E36A7259412C3ABD1CE8EC1E41DFBB1DDD5A725941E7C28CE253F01E4128A4BF9BF1715941A4A370FB1CF01E41FB982654ED7159412327BF7276EF1E4164FBEBAEE7715941EA880C23D0EE1E41CFACCA98E57159411C99AD90AAED1E41B77A98F9E5715941D9707CAEC6EB1E418278251DE7715941C8C60A7DEFE91E41807B2864E4715941C757B03340E71E417F258658E3715941CE626F3D5BE61E416AEB14E2E2715941855ECFD29EE71E4141C25394EA71594147E033ACCBE61E414B6E402113725941C22289FF27E51E41C025622A0A725941A195958C25E51E419EF653B50A7259411E9FF3D067E41E415137337834725941B1F2070168E31E4118D842626C725941D127002247E41E416350EB3F747259411F21704EC2E31E417B4E0A3B847259417DA9F9B9D3E21E41CA2291159E725941B42D4373C9E11E410999B760B37259416920416373E01E411B440FD2CA7259411F95BBD077DE1E419650233FEB725941DC99AF0DC9DC1E41685C3F5103735941F884990FFEDA1E4161A853AE267359410F00000089A8B22A57DF1E41E703DDE11B735941EFA2C99EEFE01E4119E125E21C735941658DA4F3C7E41E4188C1B56BD7725941B59B61B6FBE21E417579CB39C3725941B2B4DBF01BE41E415A5F0864A672594101FEA1233DE61E417BAA865FB77259411E1DC4FDF9E51E4104FE12E9CF7259415958FE124FE71E41666A7DEBE072594148AB1C972CE91E415E3D3BB5FA725941E4ADAED982E81E419736AE770673594171FFE45162E61E414155699C07735941CE2AA41545E41E41F45BD73D1B73594193F49E0122E31E419A6EDF10317359412866C8189BE11E4167C4380D4073594189A8B22A57DF1E41E703DDE11B73594105000000D3A3686158E71E413DD05935D2735941892EA01445E91E411C62B4BCBB7359415ABA971089EA1E41F47CF99DCA73594103B5927F9CE81E419708405CE5735941D3A3686158E71E413DD05935D27359410A0000008B3FA7055CE81E4184FDD84C8B72594174B1ED567CE91E41F61466BA727259412973678115EB1E41E627E6DB85725941AC37FCC658EC1E41D23B05BE84725941EAA9C5FD46EE1E4171F9EECB9672594165880065AEED1E41356CAAAEA4725941BAF0963126EC1E41726CBD7B9072594148B0EBEC37EB1E410A06DA84907259417C3FB28E5BEA1E41AEE40CE1A57259418B3FA7055CE81E4184FDD84C8B72594105000000FEA75287C6ED1E410CAD836058735941DFD5E2BFB1F01E411E8F87CC307359418689D0CC7EF11E41259CD507457359417D67B2CBD7EE1E41ECBF81CB6F735941FEA75287C6ED1E410CAD8360587359410D000000DB7EA4C7AAF71E415EFD0F9369735941BF7DE47E53F81E41797F864E517359419E1E058716F91E41FEEFDC413573594165DD1CDF9EF91E41617E12083A735941A2CC933DDCF81E41874F18A953735941ABB6E6166DF91E415B8D26F9587359417C6397ED27FA1E4129DB31584F735941155EEA8F27FB1E418EDD185D58735941A00281ADD1F91E4185C26477647359414379BB3B43F91E4178E6F98169735941275E925C3BF81E41C7DA4BF367735941C2B426F6FFF71E41458044B16B735941DB7EA4C7AAF71E415EFD0F936973594107000000474077823CF91E41346C5CFC2C735941FD1A1E3D09FB1E412826229A0773594182265A396CFB1E410CA62F92FF725941AA1791B816FC1E41A46BA40207735941B80F478FC0FB1E4114F559540E7359415B8A7A18E7F91E4103BA778E36735941474077823CF91E41346C5CFC2C735941100000004A5ED913A2F91E41CB2AB6E387735941F9A2E2A15FFA1E41440DAB3678735941643EC78048FC1E41DD141ACA4F73594130D06C0FAFFB1E41261944E248735941021DFCF429FC1E412E6B47CC3B73594110ECB95006FE1E4148893EFD377359413064138363FE1E412F866EE82E73594164B5FABE27FF1E411ACB029B3A735941F4AE9B900AFC1E41DF34E2DB7C7359418A92299057FB1E41003E02F4757359417ADCE56E9BFA1E412F39C788807359410994AEDF69FA1E41B757FE5283735941DE0B61A2BFFA1E4117B359D7937359418383D736AEFB1E41D89338CD9B735941AEDD5DA37FFB1E4114F6CFDFA07359414A5ED913A2F91E41CB2AB6E387735941060000000F6D941CBDFD1E41F0A3BF628A7359418A48C5E4FFFE1E41689BF3EE7B735941E93A27EEA1FF1E410A9099F984735941D17591733CFF1E4144298C749473594129D78A5101FF1E41558532879D7359410F6D941CBDFD1E41F0A3BF628A735941");
           
           Area e = new Area("00004245-3200-3c00-0000-000059689789",geom,"Forest");
           try {
               ArrayList<Area> search =null;
               search = repository.findByFeatureId("00004245-3200-3c00-0000-000059689789");
               if(search.get(0).getGeometry()!=geom) {
                   re.save(new AreaHeatMap( "00004245-3200-3c00-0000-000059689789", geom,search.get(0).getType()));
               }
               if(search==null) {
                   re.save(new AreaHeatMap( "00004245-3200-3c00-0000-000059689789", geom,"Forest"));
               }
           }
           catch(NullPointerException ne) {
               System.out.println(ne);
                   
           }
        };
	}
}            // save a couple of customers
      /*  repository.save(new Employee(Long.parseLong("2312"), "Amit K", 130000, "E"));
            repository.save(new Employee(Long.parseLong("2313"), "Adi R", 160000, "D"));
            repository.save(new Employee(Long.parseLong("2314"), "Shlomi V", 140000, "G"));
            repository.save(new Employee(Long.parseLong("2315"), "Marina V", 145000, "M"));
            
            // fetch all customers
            log.info("Customers found with findAll():");
            log.info("-------------------------------");
            for (Employee emp : repository.findAll()) {
                log.info(emp.toString());
            }
            log.info("");

            // fetch an individual customer by ID
            Employee em = null; 
            
            try{
                 em = repository.findOne(2315L);
                 //EmployeeHeat e ;
                 //log.info("em has the value "+em.toString());
                 if(em==null) {
                    
                     
                //repository.save(new Employee(Long.parseLong("2315"), "Itsik I", 150000, "M"));
                 re.save(new EmployeeHeat(Long.parseLong("2315"), "Itsik I", 150000, "M",true));
                    log.info("Customer found with findOne(2315L):");
                    log.info("--------------------------------");
                    //log.info(em.toString());
                    for (EmployeeHeat bauer : re.findByName("Itsik I")) {
                        log.info(bauer.toString());
                    }
                    log.info("");
                 }
                
                 
            }
            catch(NullPointerException ne) {
                System.out.println(ne);
                    
            }
            
            
            // fetch all customers
                        log.info("Customers found with findAll():");
                        log.info("-------------------------------");
                        for (Employee employee1 : repository.findAll()) {
                            log.info(employee1.toString());
                        }
                        log.info("");
            
            // fetch customers by last name
            log.info("Customer found with findByLastName('Adi'):");
            log.info("--------------------------------------------");
            for (Employee bauer : repository.findByName("Adi R")) {
                log.info(bauer.toString());
            }
            log.info("");
        };
            
    }

}*/
